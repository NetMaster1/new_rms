# def delete_line_posted_transfer(request, document_id, imei):
#     document = Document.objects.get(id=document_id)
#     product = Product.objects.get(imei=imei)
#     register = Register.objects.get(document=document, product=product)
#     register.deleted = True
#     register.save()
#     return redirect("change_transfer_posted", document.id)


# def check_transfer_posted(request, document_id):
#     document = Document.objects.get(id=document_id)
#     registers = Register.objects.filter(document=document)
#     shop_sender = registers.first().shop_sender
#     # if 'imei' in request.GET:
#     if request.method == "POST":
#         imei = request.POST["imei_check"]
#         quantity = request.POST["quantity_input"]
#         quantity = int(quantity)
#         # price=request.POST['price']
#         # price=int(price)
#         if Product.objects.filter(imei=imei).exists():
#             if RemainderCurrent.objects.filter(shop=shop_sender, imei=imei).exists():
#                 remainder_current = RemainderCurrent.objects.get(
#                     shop=shop_sender, imei=imei
#                 )
#                 if remainder_current.current_remainder >= quantity:
#                     product = Product.objects.get(imei=imei)
#                     if Register.objects.filter(
#                         document=document, product=product
#                     ).exists():
#                         register = Register.objects.get(
#                             document=document, product=product
#                         )
#                         register.quantity += quantity
#                         register.save()
#                         return redirect("change_transfer_posted", document.id)
#                     else:
#                         register = Register.objects.create(
#                             document=document,
#                             product=product,
#                             quantity=quantity,
#                             new=True
#                             # price=retail_price,
#                         )
#                         register.sub_total = register.quantity * register.price
#                         register.save()
#                         return redirect("change_transfer_posted", document.id)
#                 else:
#                     messages.error(
#                         request,
#                         "Необходимое количество отсутствует на складе фирмы-отправителя",
#                     )
#                     return redirect("change_transfer_posted", document.id)
#             else:
#                 messages.error(
#                     request,
#                     "Данное наименование отсутствует на складе фирмы-отправителя",
#                 )
#                 return redirect("change_transfer_posted", document.id)
#         else:
#             messages.error(
#                 request, "Данное наименование отсутствует в БД. Введите его."
#             )
#             return redirect("change_transfer_posted", document.id)