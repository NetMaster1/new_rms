{% extends 'base.html' %}
{% block content %}
<!-- <div class="hide"> -->
<div class="container">
    <div class="page_location">

        <div class="menu">
            <h3>Номенклатура</h3>
        </div>


        <div class="menu">
            <form action="{% url 'item_report' %}" method="POST">
                {% csrf_token %}

                <div class="row form-row m-auto">
                    <div class="col-3">
                        <select name="category" class='form-inline' id='category'>
                            <option value="#">Выберите категорию</option>
                            {% for category in categories %}
                            <option value="{{category.id}}">{{category.name}}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="col-2">
                        <input type="text" name="imei" placeholder="IMEI">
                    </div>
                </div>

                <div class="row form-row mt-3">
                    <div class="col-2">
                        <input type="submit" value="Применить" class="btn btn-sm btn-block btn-outline-dark">
                    </div>
                    <div class="col-2">
                        <input type="reset" value="Сбросить" class="btn btn-sm btn-block btn-outline-dark">
                    </div>
                    <div class="col-2">
                        <a href="{% url 'close_report' %}">
                            <input type="button" value="Закрыть без сохранения"
                                class="btn btn-sm btn-block btn-outline-dark">
                        </a>
                    </div>
                    <div class="col-2">
                        <a href="{% url 'save_in_excel' %}">
                            <button type="button" name="button" class="btn btn-sm btn-block btn-outline-dark">
                                Сохранить в Excel
                            </button>
                        </a>
                    </div>
            </form>
        </div>
    </div>
</div>
<div class="log">
    

    <div class="row m-auto">
        <div class="col-2">
            <h5>Категория</h5>
        </div>
        <div class="col-2">
            <h5>IMEI</h5>
        </div>
        <div class="col-1">
            <h5>Название</h5>
        </div>
    </div>
    
    {% for product in products %}
    <div class="row m-auto">
        <div class="col-2">{{product.category}}</div>
        <div class="col-2">
            <a href="#" data-bs-toggle="modal" data-bs-target="#modal_{{product.imei}}">
                {{product.imei}}
            </a>
        </div>
        <div class="col-2">{{product.name}}</div>
       
    <!-- =======================Document Bootstrap Modal================================= -->
    <div class="modal fade" id="modal_{{product.imei}}" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true" class="ModalLogHide">
        <!-- <div class="ModalLogHide"> -->
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Карточка товара</h5>
                    <button type="button" class="btn_close_log" data-bs-dismiss="modal" aria-label="Close">X</button>
                </div>
            <div class="modal-body">
                <form action="#" method="POST">
                    {% csrf_token %}
            
                    <div class="form-row">
                        <div class="col-3">
                            <label for="category">Вид ТМЦ</label>
                        </div>
                        <div class="col">
                            <select name="category" id="category" class='form-control' required>
                                {% for category in categories %}
                                <option value="{{category.id}}">{{category.name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="name">Наименование:</label>
                        <input class='form-control' type="text" id="name" name="name" value='{{product.name}}'>
                    </div>
                    <div class="form-group">
                        <label for="name">IMEI:</label>
                        <input class='form-control' type="text" id="input_imei" name="imei" value='{{product.imei}}'>
                    </div>
            </div>
     
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
                    <button type="button" class="btn btn-primary">Печать</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================End of Document Bootstrap Modal======================================= -->


    </div>
    {% endfor %}
          

</div>
</div>
</div>
<!-- </div> -->

<script>
    /*const product_cards = document.querySelectorAll('#product_card');
    const btn_close = document.querySelectorAll('.button_close');
    const enterProductCard = document.querySelector('.enterProductCard');

    for (let i = 0; i < product_cards.length; i++){
        product_cards[i].addEventListener('click', openModal)
    }

    function openModal() {
        enterProductCard.classList.add('openModal')
    }

    function closeModal() {
        enterProductCard.classList.remove('openModal')
    }*/
</script>*/

{% endblock %}